<!DOCTYPE html>
<html lang="pt-BR" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DaVinci - Gênio Criativo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PDF.js for rendering PDF previews -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <!-- html2pdf for generating PDFs from HTML -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
      window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
     <!-- gtag -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3FFD7ZEBN1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config','G-3FFD7ZEBN1',{ page_path: location.pathname });
  </script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:wght@400;600&display=swap');
      /* Da Vinci Mode Fonts */
      body {
        font-family: 'Inter', sans-serif;
        background-color: #09090b; /* Zinc 950 */
        color: #fafafa;
        transition: background-color 0.5s ease, color 0.5s ease;
      }
      /* Technical Dot Grid Background (Default) */
      .bg-dot-grid {
        background-size: 40px 40px;
        background-image: radial-gradient(circle, #3f3f46 1px, transparent 1px);
      }
      /* Smooth scrolling for the whole app */
      html {
        scroll-behavior: smooth;
      }
    </style>

  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "react-dom": "https://aistudiocdn.com/react-dom@^19.2.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0",
    "@heroicons/react/24/outline": "https://aistudiocdn.com/@heroicons/react@^2.2.0/24/outline",
    "@heroicons/react/24/solid": "https://aistudiocdn.com/@heroicons/react@^2.2.0/24/solid",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "@heroicons/react/": "https://aistudiocdn.com/@heroicons/react@^2.2.0/"
  }
}
</script>
  <script type="module" crossorigin src="/assets/index-C183EHT4.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-BPKHGD5b.css">
</head>
  <body>
    <div id="root"></div>
    <!-- Modal API Key (CapyUniverse compatible) -->
<div id="apiKeyOverlay" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);backdrop-filter:blur(8px);z-index:9999;">
  <div style="width:min(520px,92vw);background:rgba(20,20,24,.92);border:1px solid rgba(255,255,255,.10);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.55);padding:18px;">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
      <div>
        <div style="font-size:14px;opacity:.9;margin-bottom:4px;">Configuração rápida</div>
        <div style="font-size:18px;font-weight:700;">Inserir chave Gemini</div>
      </div>
      <button id="apiKeyClose" style="background:transparent;border:0;color:#fff;opacity:.7;font-size:18px;cursor:pointer;">✕</button>
    </div>

    <p style="margin:12px 0 10px;opacity:.8;line-height:1.35;">
      Esse app usa a mesma chave do <b>CapyUniverse</b> (<code>capyUniverseApiKey_gemini</code>).  
      Se você abriu fora do hub, cole sua chave aqui e pronto.
    </p>

    <div style="display:flex;gap:10px;align-items:center;">
      <input id="apiKeyInput" type="password" placeholder="Cole sua API Key aqui"
        style="flex:1;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px 12px;color:#fff;outline:none;" />
      <button id="apiKeyToggle"
        style="background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.10);border-radius:14px;padding:12px 12px;color:#fff;cursor:pointer;">
        Mostrar
      </button>
    </div>

    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:14px;">
      <button id="apiKeyLater"
        style="background:transparent;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:10px 14px;color:#fff;opacity:.85;cursor:pointer;">
        Agora não
      </button>
      <button id="apiKeySave"
        style="background:linear-gradient(135deg, rgba(140,90,255,.9), rgba(0,200,255,.7));border:0;border-radius:14px;padding:10px 14px;color:#fff;font-weight:700;cursor:pointer;">
        Salvar chave
      </button>
    </div>

    <div id="apiKeyHint" style="margin-top:10px;opacity:.65;font-size:12px;">
      Dica: a chave fica salva localmente no seu navegador.
    </div>
  </div>
</div>

<script>
  (function () {
    const KEY_STORAGE = "capyUniverseApiKey_gemini";

    const overlay = document.getElementById("apiKeyOverlay");
    const input = document.getElementById("apiKeyInput");
    const btnSave = document.getElementById("apiKeySave");
    const btnLater = document.getElementById("apiKeyLater");
    const btnClose = document.getElementById("apiKeyClose");
    const btnToggle = document.getElementById("apiKeyToggle");
    const hint = document.getElementById("apiKeyHint");

    function getKey() {
      try {
        const v = localStorage.getItem(KEY_STORAGE);
        return v && v.trim() ? v.trim() : null;
      } catch { return null; }
    }
    function setKey(v) {
      try { localStorage.setItem(KEY_STORAGE, v.trim()); } catch {}
    }

    function openModal() {
      overlay.style.display = "flex";
      setTimeout(() => input.focus(), 50);
    }
    function closeModal() {
      overlay.style.display = "none";
    }

    // Auto-open se não houver chave (fora do CapyUniverse)
    if (!getKey()) openModal();

    btnToggle.addEventListener("click", () => {
      const isPwd = input.type === "password";
      input.type = isPwd ? "text" : "password";
      btnToggle.textContent = isPwd ? "Ocultar" : "Mostrar";
    });

    btnSave.addEventListener("click", () => {
      const v = (input.value || "").trim();
      if (!v) {
        hint.textContent = "Cole uma chave válida antes de salvar.";
        hint.style.opacity = 0.9;
        return;
      }
      setKey(v);
      hint.textContent = "Chave salva! Recarregando…";
      hint.style.opacity = 0.9;
      closeModal();
      location.reload();
    });

    btnLater.addEventListener("click", closeModal);
    btnClose.addEventListener("click", closeModal);

    // Enter para salvar
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") btnSave.click();
    });

    // Expor utilitários se quiser chamar do app
    window.CapyApiKey = { openModal, getKey, setKey };
  })();
</script>

</body>
</html>